---
layout: page
title:  "湖"
author: mosfet
category: scene
tags: 场景
---
这是一些对于水面渲染的早期经验和理解。  

## 场景描述
该场景仅含两个平面，其中一个建模波浪起伏的湖面，地形可由参数曲面表示，特别是使用FBM产生自相似的形状。另一个用于水底，一些石头，纹理来自于[polyhaven.com](https://polyhaven.com/textures)。您至少应该包含`ao、diff、disp、rough`四种类型用于一般着色。  

<iframe src="https://editor.p5js.org/mosfet-archive/full/3ZQ76doA9" width="760" height="800" class="x la dspln dsplb-md"></iframe>

## 调整着色
理论上，完全可以使用一些全局光照方法对此类水面进行照明获得最佳实践效果。  
本场景不致力于此实现，而是转而模仿一些计算机图形中最常见的水渲染技术，通常是基于光栅化和FBO的，但本质上是通用的。  
读者可以在海豚书原文和 或网络教程 **[该视频链接](https://www.youtube.com/watch?v=LgnLB07HDSw&t=69s)**中找到引用。  

总的来说，您通过已渲染帧的结果、或者单独渲染一个画面分别为最终画面提供反射和折射效果。  
通常，这种反射、折射的选择尽可能地便宜。一个特征是编写者通常会将场景一分为二，然后单独考虑它们的结果，这种结果对于整个画面都是有着色的，他们通常还会直接忽略折射中的一些典型现象，而产生非物理的结果，但这实际上不会有太大问题，没人会关注这种细节。  
以至于越来越追求实用性，用纹理产生乱流和标准向量。甚至不需要任何标准向量就混合折射和反射。  

本场景基本上也利用了类似的有效近似，我们最好在混合前讨论一些基本策略。  
首先，反射很简单，这部分的照明原本就来自于天空。但很难表现出折射的真实颜色，因为湖底的表面又不是类似于水面的镜面。这里我遵循了一些近似全局照明的方式，使用与背景中的大致类似的颜色作为灯光，而不实际取决于它们。随后我加入了一些比尔法赋予水的可能杂质颜色，补充了一些反射灯光，因为通常水面在高亮光源前产生波光粼粼的视觉效果，仅反射黄色的圆盘太阳很难达到这种目的。  